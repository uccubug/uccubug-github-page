var bt=s=>{throw TypeError(s)};var Zt=(s,a,i)=>a.has(s)||bt("Cannot "+i);var kt=(s,a,i)=>a.has(s)?bt("Cannot add the same private member more than once"):a instanceof WeakSet?a.add(s):a.set(s,i);var dt=(s,a,i)=>(Zt(s,a,"access private method"),i);import{p as T,v as Bt,x as Xt,_ as At,o as Et,c as Wt,a3 as Gt,q as Jt,j as f,n as Pt,k as Qt,N as j,Y as St,Z as Ft,G as Kt,F as te}from"./framework.BOdwdXAg.js";import{r as ee}from"./randomColor.Bm-MoKWE.js";import"./theme.CewpmPjo.js";const ae="/assets/we.f9yzZQNH.png";var pt={};(function s(a,i,r,o){var c=!!(a.Worker&&a.Blob&&a.Promise&&a.OffscreenCanvas&&a.OffscreenCanvasRenderingContext2D&&a.HTMLCanvasElement&&a.HTMLCanvasElement.prototype.transferControlToOffscreen&&a.URL&&a.URL.createObjectURL),w=typeof Path2D=="function"&&typeof DOMMatrix=="function",y=function(){if(!a.OffscreenCanvas)return!1;var e=new OffscreenCanvas(1,1),t=e.getContext("2d");t.fillRect(0,0,1,1);var n=e.transferToImageBitmap();try{t.createPattern(n,"no-repeat")}catch{return!1}return!0}();function F(){}function M(e){var t=i.exports.Promise,n=t!==void 0?t:a.Promise;return typeof n=="function"?new n(e):(e(F,F),null)}var I=function(e,t){return{transform:function(n){if(e)return n;if(t.has(n))return t.get(n);var h=new OffscreenCanvas(n.width,n.height),d=h.getContext("2d");return d.drawImage(n,0,0),t.set(n,h),h},clear:function(){t.clear()}}}(y,new Map),B=function(){var e=Math.floor(16.666666666666668),t,n,h={},d=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(t=function(u){var v=Math.random();return h[v]=requestAnimationFrame(function l(p){d===p||d+e-1<p?(d=p,delete h[v],u()):h[v]=requestAnimationFrame(l)}),v},n=function(u){h[u]&&cancelAnimationFrame(h[u])}):(t=function(u){return setTimeout(u,e)},n=function(u){return clearTimeout(u)}),{frame:t,cancel:n}}(),E=function(){var e,t,n={};function h(d){function u(v,l){d.postMessage({options:v||{},callback:l})}d.init=function(l){var p=l.transferControlToOffscreen();d.postMessage({canvas:p},[p])},d.fire=function(l,p,b){if(t)return u(l,null),t;var P=Math.random().toString(36).slice(2);return t=M(function(k){function S(R){R.data.callback===P&&(delete n[P],d.removeEventListener("message",S),t=null,I.clear(),b(),k())}d.addEventListener("message",S),u(l,P),n[P]=S.bind(null,{data:{callback:P}})}),t},d.reset=function(){d.postMessage({reset:!0});for(var l in n)n[l](),delete n[l]}}return function(){if(e)return e;if(!r&&c){var d=["var CONFETTI, SIZE = {}, module = {};","("+s.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{e=new Worker(URL.createObjectURL(new Blob([d])))}catch(u){return typeof console!==void 0&&typeof console.warn=="function"&&console.warn("🎊 Could not load worker",u),null}h(e)}return e}}(),W={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function L(e,t){return t?t(e):e}function G(e){return e!=null}function C(e,t,n){return L(e&&G(e[t])?e[t]:W[t],n)}function V(e){return e<0?0:Math.floor(e)}function Y(e,t){return Math.floor(Math.random()*(t-e))+e}function H(e){return parseInt(e,16)}function J(e){return e.map(U)}function U(e){var t=String(e).replace(/[^0-9a-f]/gi,"");return t.length<6&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),{r:H(t.substring(0,2)),g:H(t.substring(2,4)),b:H(t.substring(4,6))}}function Q(e){var t=C(e,"origin",Object);return t.x=C(t,"x",Number),t.y=C(t,"y",Number),t}function K(e){e.width=document.documentElement.clientWidth,e.height=document.documentElement.clientHeight}function tt(e){var t=e.getBoundingClientRect();e.width=t.width,e.height=t.height}function et(e){var t=document.createElement("canvas");return t.style.position="fixed",t.style.top="0px",t.style.left="0px",t.style.pointerEvents="none",t.style.zIndex=e,t}function x(e,t,n,h,d,u,v,l,p){e.save(),e.translate(t,n),e.rotate(u),e.scale(h,d),e.arc(0,0,1,v,l,p),e.restore()}function m(e){var t=e.angle*(Math.PI/180),n=e.spread*(Math.PI/180);return{x:e.x,y:e.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:e.startVelocity*.5+Math.random()*e.startVelocity,angle2D:-t+(.5*n-Math.random()*n),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:e.color,shape:e.shape,tick:0,totalTicks:e.ticks,decay:e.decay,drift:e.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:e.gravity*3,ovalScalar:.6,scalar:e.scalar,flat:e.flat}}function _(e,t){t.x+=Math.cos(t.angle2D)*t.velocity+t.drift,t.y+=Math.sin(t.angle2D)*t.velocity+t.gravity,t.velocity*=t.decay,t.flat?(t.wobble=0,t.wobbleX=t.x+10*t.scalar,t.wobbleY=t.y+10*t.scalar,t.tiltSin=0,t.tiltCos=0,t.random=1):(t.wobble+=t.wobbleSpeed,t.wobbleX=t.x+10*t.scalar*Math.cos(t.wobble),t.wobbleY=t.y+10*t.scalar*Math.sin(t.wobble),t.tiltAngle+=.1,t.tiltSin=Math.sin(t.tiltAngle),t.tiltCos=Math.cos(t.tiltAngle),t.random=Math.random()+2);var n=t.tick++/t.totalTicks,h=t.x+t.random*t.tiltCos,d=t.y+t.random*t.tiltSin,u=t.wobbleX+t.random*t.tiltCos,v=t.wobbleY+t.random*t.tiltSin;if(e.fillStyle="rgba("+t.color.r+", "+t.color.g+", "+t.color.b+", "+(1-n)+")",e.beginPath(),w&&t.shape.type==="path"&&typeof t.shape.path=="string"&&Array.isArray(t.shape.matrix))e.fill(lt(t.shape.path,t.shape.matrix,t.x,t.y,Math.abs(u-h)*.1,Math.abs(v-d)*.1,Math.PI/10*t.wobble));else if(t.shape.type==="bitmap"){var l=Math.PI/10*t.wobble,p=Math.abs(u-h)*.1,b=Math.abs(v-d)*.1,P=t.shape.bitmap.width*t.scalar,k=t.shape.bitmap.height*t.scalar,S=new DOMMatrix([Math.cos(l)*p,Math.sin(l)*p,-Math.sin(l)*b,Math.cos(l)*b,t.x,t.y]);S.multiplySelf(new DOMMatrix(t.shape.matrix));var R=e.createPattern(I.transform(t.shape.bitmap),"no-repeat");R.setTransform(S),e.globalAlpha=1-n,e.fillStyle=R,e.fillRect(t.x-P/2,t.y-k/2,P,k),e.globalAlpha=1}else if(t.shape==="circle")e.ellipse?e.ellipse(t.x,t.y,Math.abs(u-h)*t.ovalScalar,Math.abs(v-d)*t.ovalScalar,Math.PI/10*t.wobble,0,2*Math.PI):x(e,t.x,t.y,Math.abs(u-h)*t.ovalScalar,Math.abs(v-d)*t.ovalScalar,Math.PI/10*t.wobble,0,2*Math.PI);else if(t.shape==="star")for(var g=Math.PI/2*3,A=4*t.scalar,D=8*t.scalar,O=t.x,q=t.y,$=5,N=Math.PI/$;$--;)O=t.x+Math.cos(g)*D,q=t.y+Math.sin(g)*D,e.lineTo(O,q),g+=N,O=t.x+Math.cos(g)*A,q=t.y+Math.sin(g)*A,e.lineTo(O,q),g+=N;else e.moveTo(Math.floor(t.x),Math.floor(t.y)),e.lineTo(Math.floor(t.wobbleX),Math.floor(d)),e.lineTo(Math.floor(u),Math.floor(v)),e.lineTo(Math.floor(h),Math.floor(t.wobbleY));return e.closePath(),e.fill(),t.tick<t.totalTicks}function st(e,t,n,h,d){var u=t.slice(),v=e.getContext("2d"),l,p,b=M(function(P){function k(){l=p=null,v.clearRect(0,0,h.width,h.height),I.clear(),d(),P()}function S(){r&&!(h.width===o.width&&h.height===o.height)&&(h.width=e.width=o.width,h.height=e.height=o.height),!h.width&&!h.height&&(n(e),h.width=e.width,h.height=e.height),v.clearRect(0,0,h.width,h.height),u=u.filter(function(R){return _(v,R)}),u.length?l=B.frame(S):k()}l=B.frame(S),p=k});return{addFettis:function(P){return u=u.concat(P),b},canvas:e,promise:b,reset:function(){l&&B.cancel(l),p&&p()}}}function at(e,t){var n=!e,h=!!C(t||{},"resize"),d=!1,u=C(t,"disableForReducedMotion",Boolean),v=c&&!!C(t||{},"useWorker"),l=v?E():null,p=n?K:tt,b=e&&l?!!e.__confetti_initialized:!1,P=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,k;function S(g,A,D){for(var O=C(g,"particleCount",V),q=C(g,"angle",Number),$=C(g,"spread",Number),N=C(g,"startVelocity",Number),Nt=C(g,"decay",Number),qt=C(g,"gravity",Number),zt=C(g,"drift",Number),yt=C(g,"colors",J),Vt=C(g,"ticks",Number),xt=C(g,"shapes"),$t=C(g,"scalar"),jt=!!C(g,"flat"),Mt=Q(g),Ct=O,ct=[],Yt=e.width*Mt.x,Ut=e.height*Mt.y;Ct--;)ct.push(m({x:Yt,y:Ut,angle:q,spread:$,startVelocity:N,color:yt[Ct%yt.length],shape:xt[Y(0,xt.length)],ticks:Vt,decay:Nt,gravity:qt,drift:zt,scalar:$t,flat:jt}));return k?k.addFettis(ct):(k=st(e,ct,p,A,D),k.promise)}function R(g){var A=u||C(g,"disableForReducedMotion",Boolean),D=C(g,"zIndex",Number);if(A&&P)return M(function(N){N()});n&&k?e=k.canvas:n&&!e&&(e=et(D),document.body.appendChild(e)),h&&!b&&p(e);var O={width:e.width,height:e.height};l&&!b&&l.init(e),b=!0,l&&(e.__confetti_initialized=!0);function q(){if(l){var N={getBoundingClientRect:function(){if(!n)return e.getBoundingClientRect()}};p(N),l.postMessage({resize:{width:N.width,height:N.height}});return}O.width=O.height=null}function $(){k=null,h&&(d=!1,a.removeEventListener("resize",q)),n&&e&&(document.body.contains(e)&&document.body.removeChild(e),e=null,b=!1)}return h&&!d&&(d=!0,a.addEventListener("resize",q,!1)),l?l.fire(g,O,$):S(g,O,$)}return R.reset=function(){l&&l.reset(),k&&k.reset()},R}var Z;function nt(){return Z||(Z=at(null,{useWorker:!0,resize:!0})),Z}function lt(e,t,n,h,d,u,v){var l=new Path2D(e),p=new Path2D;p.addPath(l,new DOMMatrix(t));var b=new Path2D;return b.addPath(p,new DOMMatrix([Math.cos(v)*d,Math.sin(v)*d,-Math.sin(v)*u,Math.cos(v)*u,n,h])),b}function ht(e){if(!w)throw new Error("path confetti are not supported in this browser");var t,n;typeof e=="string"?t=e:(t=e.path,n=e.matrix);var h=new Path2D(t),d=document.createElement("canvas"),u=d.getContext("2d");if(!n){for(var v=1e3,l=v,p=v,b=0,P=0,k,S,R=0;R<v;R+=2)for(var g=0;g<v;g+=2)u.isPointInPath(h,R,g,"nonzero")&&(l=Math.min(l,R),p=Math.min(p,g),b=Math.max(b,R),P=Math.max(P,g));k=b-l,S=P-p;var A=10,D=Math.min(A/k,A/S);n=[D,0,0,D,-Math.round(k/2+l)*D,-Math.round(S/2+p)*D]}return{type:"path",path:t,matrix:n}}function Ht(e){var t,n=1,h="#000000",d='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof e=="string"?t=e:(t=e.text,n="scalar"in e?e.scalar:n,d="fontFamily"in e?e.fontFamily:d,h="color"in e?e.color:h);var u=10*n,v=""+u+"px "+d,l=new OffscreenCanvas(u,u),p=l.getContext("2d");p.font=v;var b=p.measureText(t),P=Math.ceil(b.actualBoundingBoxRight+b.actualBoundingBoxLeft),k=Math.ceil(b.actualBoundingBoxAscent+b.actualBoundingBoxDescent),S=2,R=b.actualBoundingBoxLeft+S,g=b.actualBoundingBoxAscent+S;P+=S+S,k+=S+S,l=new OffscreenCanvas(P,k),p=l.getContext("2d"),p.font=v,p.fillStyle=h,p.fillText(t,R,g);var A=1/n;return{type:"bitmap",bitmap:l.transferToImageBitmap(),matrix:[A,0,0,A,-P*A/2,-k*A/2]}}i.exports=function(){return nt().apply(this,arguments)},i.exports.reset=function(){nt().reset()},i.exports.create=at,i.exports.shapeFromPath=ht,i.exports.shapeFromText=Ht})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),pt,!1);const ie=pt.exports;pt.exports.create;const re=[[78,0],[194,0],[278,88],[362,0],[478,0],[556,91],[552,234],[486,312],[278,432],[70,312],[4,234],[0,91]];class It{constructor({maxSpeed:a=50,fill:i="white",r=6,hearts:o,x:c,y:w,ctx:y,heartPath:F,randomcolor:M}){if(this.r=r,this.speedX=ot(-a,a)||10,this.speedY=ot(-a,a)||10,this.lastMoveTime=null,this.fill=i,M&&typeof M=="function"&&(this.fill=M()),this.hearts=o,this.heartPath=F,this.ctx=y,this.x=c,this.y=w,!c||!w){const I=this.randPointInHeart();this.x=I[0],this.y=I[1]}}randPointInHeart(){const a=Math.max(...this.hearts.map(o=>o[0])),i=Math.max(...this.hearts.map(o=>o[1]));let r=Rt(a,i);for(;!ut({x:r[0],y:r[1],ctx:this.ctx,path:this.heartPath});)r=Rt(a,i);return r}draw(a){if(this.lastMoveTime){const r=Date.now()-this.lastMoveTime,o=this.x+this.speedX*r/1e3,c=this.y+this.speedY*r/1e3;ut({x:o,y:c,ctx:this.ctx,path:this.heartPath})?(this.x=o,this.y=c):(this.speedX=-this.speedX,this.speedY=-this.speedY)}a.fillStyle=this.fill,a.beginPath(),a.arc(this.x,this.y,this.r,0,Math.PI*2),a.fill(),this.lastMoveTime=Date.now()}}class se{constructor({points:a=60,maxDis:i=200,linefill:r="#ffffff",bg:o="dark",hearts:c,maxSpeed:w=50,randomcolor:y,pointFill:F="white",pointR:M=6,hCtx:I,heartPath:B}){this.points=Array(a).fill(0).map(()=>new It({hearts:c,maxSpeed:w,heartPath:B,randomcolor:y,fill:F,r:M,ctx:I})),this.maxDis=i,this.maxPoints=Math.max(a+10,30),this.bg=o,this.randomcolor=y,this.linefill=r,this.addPoint=(E,W)=>{ut({x:E,y:W,ctx:I,path:B})&&(this.points.push(new It({hearts:c,heartPath:B,randomcolor:y,maxSpeed:w,x:E,y:W,fill:F,r:M,ctx:I})),this.points.length>this.maxPoints&&this.points.shift())}}draw({ctx:a,cvs:i}){a.clearRect(0,0,i.width,i.height),this.bg&&(a.fillStyle=this.bg,a.fillRect(0,0,i.width,i.height));for(const r in this.points){this.points[r].draw(a);for(let o=+r+1;o<this.points.length;o++){const c=Math.sqrt((this.points[r].x-this.points[o].x)**2+(this.points[r].y-this.points[o].y)**2);if(c>this.maxDis)continue;a.beginPath(),a.moveTo(this.points[r].x,this.points[r].y),a.lineTo(this.points[o].x,this.points[o].y),a.closePath();const w=Math.round((1-c/this.maxDis)*255).toString(16).padStart(2,"0");a.strokeStyle=this.linefill+w,a.stroke()}}}}function ut({x:s,y:a,ctx:i,path:r}){return i.isPointInPath(r,s,a)}function ot(s,a){return Math.floor(Math.random()*(a-s+1))+s}function Rt(s,a){return[ot(0,s),ot(0,a)]}var rt,vt;const wt=class wt{constructor(a){kt(this,rt);const{cvsWidth:i=600,maxSpeed:r=50,points:o=40,pointR:c=6,pointsMaxDis:w=200,pointFill:y="#ffffff",graphBg:F=null,linefill:M="#ffffff",heartBg:I=null,heartStrokeWidth:B=0,heartBlur:E=10,heartShadow:W="#ffffffa0",heartStrokeCl:L="white",heartFill:G="#FFffff50",cvsPadding:C=10,hearts:V=re,wrapNodeClass:Y=null,randomcolor:H}=a;this.stop=!1,this.options=a,this.heartFill=G,this.heartBg=I,this.heartStrokeCl=L,this.heartStrokeWidth=B,this.heartBlur=E,this.heartShadow=W;const{hearts:J,ratio:U}=this.fixedHearts(i,V);this.hearts=J;const{gCvs:Q,gCtx:K,hCvs:tt,hCtx:et,wrap:x}=this.genCanvas({cvsWidth:i,csvHeight:Math.ceil(i*U),margin:C,wrapNodeClass:Y});this.gCvs=Q,this.gCtx=K,this.hCvs=tt,this.hCtx=et,this.wrap=x,this.points=o,this.pointR=c*devicePixelRatio,this.maxSpeed=r,this.pointFill=y,this.linefill=M,this.pointsMaxDis=w,this.randomcolor=H,this.graphBg=F,this.heartPath=void 0,this.graph=void 0,dt(this,rt,vt).call(this),this.addEventListener()}static getHeartElement(a){const i=new wt(a||{});return{element:i.wrap,draw:i.startDrawLoop.bind(i),heart:i}}addEventListener(){!this.graph||!this.gCvs||this.gCvs.addEventListener("click",a=>{const i=this.gCvs.width/this.gCvs.clientWidth,r=a.offsetX*i,o=a.offsetY*i;this.graph.addPoint(r,o)})}update(){dt(this,rt,vt).call(this),this.draw()}startDrawLoop(){this.stop=!1,this.draw()}stopDrawLoop(){this.stop=!0}draw(){this.stop||requestAnimationFrame(this.draw.bind(this)),this.graph.draw({ctx:this.gCtx,cvs:this.gCvs})}drawHeart(){this.hCtx.clearRect(0,0,this.hCvs.width,this.hCvs.height),this.heartBg&&(this.hCtx.fillStyle=this.heartBg,this.hCtx.fillRect(0,0,this.hCvs.width,this.hCvs.height));const a=new Path2D;a.moveTo(...this.hearts[0]),this.hCtx.lineJoin="round",this.hCtx.lineCap="round";for(let i=1;i<this.hearts.length;i++)a.lineTo(...this.hearts[i]);return a.lineTo(...this.hearts[0]),this.heartBlur&&(this.hCtx.shadowBlur=this.heartBlur,this.hCtx.shadowColor=this.heartShadow),this.hCtx.fillStyle=this.heartFill,this.hCtx.fill(a),this.heartStrokeWidth&&(this.hCtx.strokeStyle=this.heartStrokeCl,this.hCtx.lineWidth=this.heartStrokeWidth,this.hCtx.stroke(a)),a}genCanvas({cvsWidth:a,csvHeight:i,margin:r,wrapNodeClass:o}){const c=document.createElement("canvas");a=a+2*this.heartStrokeWidth+2*this.heartBlur,i=i+2*this.heartStrokeWidth+2*this.heartBlur,c.width=a,c.height=i,c.style.position="absolute",c.style.width="100%",c.style.top="0",c.style.left="0";const w=c.getContext("2d"),y=document.createElement("canvas");y.width=a,y.height=i,y.style.margin="0",y.style.width="100%";const F=y.getContext("2d"),M=document.createElement("div");return M.style.position="relative",M.style.margin=`${r}px`,M.style.width=`calc(100% - ${r*2}px)`,o&&M.classList.add(o),M.appendChild(y),M.appendChild(c),{gCvs:c,gCtx:w,hCvs:y,hCtx:F,wrap:M}}fixedHearts(a,i){const r=Math.max(...i.map(w=>w[0])),o=Math.max(...i.map(w=>w[1])),c=a/r;return{hearts:i.map(w=>[Math.round(w[0]*c)+this.heartStrokeWidth+this.heartBlur,Math.round(w[1]*c)+this.heartStrokeWidth+this.heartBlur]),ratio:o/r}}};rt=new WeakSet,vt=function(){this.heartPath=this.drawHeart(),this.graph=new se({points:this.points,hearts:this.hearts,maxSpeed:this.maxSpeed,maxDis:this.pointsMaxDis,bg:this.graphBg,linefill:this.linefill,pointFill:this.pointFill,pointR:this.pointR,hCtx:this.hCtx,heartPath:this.heartPath,randomcolor:this.randomcolor})};let ft=wt;function ne(s){const a=T(0),i=T(0);let r;function o(c){var w,y;a.value=((w=c==null?void 0:c.target)==null?void 0:w.scrollTop)||0,i.value=((y=c==null?void 0:c.target)==null?void 0:y.scrollLeft)||0}return Bt(()=>{s.value.addEventListener("scroll",o),r=s.value,a.value=r.scrollTop,i.value=r.scrollLeft}),Xt(()=>{r.removeEventListener("scroll",o)}),{scrollX:i,scrollY:a}}function it({startY:s,endY:a,startVal:i,endVal:r}){return function(o){return o<s?i:o>a?r:i+(r-i)*(o-s)/(a-s)}}class oe{constructor(a){const{words:i="hello world",cvs:r,cvsWidth:o=600,cvsHeight:c=600,fontFamily:w="monospace",fontColor:y="gold",fontSize:F=20,cvsBg:M=null,mask:I="#0000001a",delay:B=200}=a;this.cvs=r,this.ctx=r.getContext("2d"),this.fontFamily=w,this.ctx.testBaseline="top",r.width=o,r.height=c;const E=Math.ceil(r.width/F);this.wordIndex=Array(E).fill(0).map(W=>Math.floor(Math.random()*(i.length-1))),this.paintIndex=Array(E).fill(0).map(W=>Math.floor(Math.random()*10)),this.words=i,this.fontColor=y,this.fontSize=F,this.cvsBg=M,this.delay=B,this.mask=I,this.stop=!1,this.lastPaint=void 0,this.cvsBg&&(this.ctx.fillStyle=M,this.ctx.fillRect(0,0,r.width,r.height))}draw(){this.ctx.fillStyle=this.mask,this.ctx.fillRect(0,0,this.cvs.width,this.cvs.height);for(let a=0;a<this.wordIndex.length;a++){const i=this.words[this.wordIndex[a]];this.ctx.font=`${this.fontSize}px ${this.fontFamily}`,this.ctx.fillStyle=this.fontColor,this.ctx.fillText(i,a*this.fontSize,this.paintIndex[a]*this.fontSize),this.paintIndex[a]*this.fontSize>this.cvs.height&&Math.random()>.9&&(this.paintIndex[a]=0),this.wordIndex[a]=(this.wordIndex[a]+1)%this.words.length,this.paintIndex[a]++}}paint(a){this.stop||(this.lastPaint||(this.lastPaint=a,this.draw()),a-this.lastPaint>=this.delay&&(this.draw(),this.lastPaint=a),requestAnimationFrame(this.paint.bind(this)))}startLoop(){this.stop=!1,requestAnimationFrame(this.paint.bind(this))}stopLoop(){this.stop=!0}}window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(s){window.setTimeout(s,1e3/60)};var Tt,X,mt,gt,z=[],le=.04,Lt,_t;function he(s){return Tt=s,mt=s.width,gt=s.height,X=Tt.getContext("2d"),()=>requestAnimationFrame(Dt)}function Dt(){ce(),de(),window.requestAnimationFrame(Dt)}function ce(){if(z.length<500&&Math.random()<le)for(let i=0;i<4;i++)ue();for(var s=[],a=0;a<z.length;a++)z[a].move()&&s.push(z[a]);z=s}function de(){X.globalCompositeOperation="source-over",X.fillStyle="rgba(0,0,0,0.2)",X.fillRect(0,0,mt,gt),X.globalCompositeOperation="lighter";for(var s=0;s<z.length;s++)z[s].draw(X)}function ue(){Lt=Math.random()*(mt-200)+100,_t=Math.random()*(gt-200)+100;for(var s=Math.random()*50+100,a="rgb("+~~(Math.random()*200+55)+","+~~(Math.random()*200+55)+","+~~(Math.random()*200+55)+")",i=0;i<s;i++){var r=new Ot;r.color=a;var o=Math.sqrt(25-r.vx*r.vx);Math.abs(r.vy)>o&&(r.vy=r.vy>0?o:-o),z.push(r)}}function Ot(){this.w=this.h=Math.random()*4+1,this.x=Lt-this.w/2,this.y=_t-this.h/2,this.vx=(Math.random()-.5)*10,this.vy=(Math.random()-.5)*10,this.alpha=Math.random()*.5+.5,this.color}Ot.prototype={gravity:.05,move:function(){return this.x+=this.vx,this.vy+=this.gravity,this.y+=this.vy,this.alpha-=.01,!(this.x<=-this.w||this.x>=innerWidth.width||this.y>=innerHeight.height||this.alpha<=0)},draw:function(s){s.save(),s.beginPath(),s.translate(this.x+this.w/2,this.y+this.h/2),s.arc(0,0,this.w,0,Math.PI*2),s.fillStyle=this.color,s.globalAlpha=this.alpha,s.closePath(),s.fill(),s.restore()}};const fe="/assets/cake.Bu8awdjS.png",ve={},pe={class:"bk-wrap"};function me(s,a){return Et(),Wt("div",pe,a[0]||(a[0]=[Gt('<div class="cake-img-wrap"><div class="flame"><div class="light"></div><div class="light"></div><div class="light"></div><div class="light"></div></div><img src="'+fe+'" alt=""></div>',1)]))}const ge=At(ve,[["render",me]]),we={class:"main-content"},ye={class:"cake-wrap show-box"},xe={class:"cake-box sticky-box"},Me={class:"letter-wrap show-box"},Ce={class:"sticky-box letter-sticky"},be={class:"letter-box"},ke={class:"content"},Pe={class:"firework"},Se={__name:"index",setup(s){const a=T(),i=T(),r=T(),o=T(),c=T(),w=T(!1),y=T(),F=T(),M=T(),I=T({}),B=T(100),E=T(1),W=T(-100),L=T(0),G=T(1),C={heartAnimation:{animationF:it({startY:60,endY:500,startVal:1,endVal:0}),update(x){B.value=x}},hTextAnimation:{animationF:it({startY:0,endY:300,startVal:1,endVal:0}),update(x){E.value=x}},cakeMaskAnimation:{animationF:it({startY:830,endY:1100,startVal:-100,endVal:100}),update(x){W.value=x}},letterAnimation:{animationF:it({startY:2520,endY:3050,startVal:0,endVal:1}),update(x){L.value=x}},picAnimation:{animationF:it({startY:60,endY:700,startVal:1,endVal:100}),update(x){G.value=x}}},{scrollY:V}=ne(r),Y={points:80,pointsMaxDis:300,heartFill:"#FFffff50",pointR:6,heartStrokeWidth:8,maxSpeed:80,heartStrokeCl:"#ffffffff",heartBlur:40,wrapNodeClass:"wrap",heartShadow:"#ffffffa0",randomcolor:()=>ee({luminosity:"light",format:"rgba"})},H={words:["生日快乐呀，我的宝儿~，要一直一直开心呀。","生日快乐！我们都要像对方一样勇敢~"," 生日快乐！快乐来的时候快乐就好呀~","想和你去很多很多地方，吃很多很多好吃的。","当然是希望你永远开心快乐呀。","生日快乐！纸短情长，我的思念不止于此。","无比期待下一次拥抱。其实，期待每一次拥抱哈哈哈。","还想一起去一次大理呀。","其实不止大理，天南海北，先跟你去看好多地方。","好好吃饭，好好睡觉哦。","期待每天抱着你睡觉的日子。"].join(""),fontColor:"#e21560",fontSize:14*devicePixelRatio,cvsBg:null,mask:"#00000019",delay:130},J=()=>{w.value=!0,F.value.startDrawLoop(),U(3e3,()=>{c.value.close()})};Jt(V,x=>{x<533?F.value.stop&&(F.value.startDrawLoop(),console.log("heart start")):F.value.stop||(F.value.stopDrawLoop(),console.log("heart stop")),x>=1100&&x<=2600?y.value.stop&&(y.value.startLoop(),console.log("code start")):y.value.stop||(y.value.stopLoop(),console.log("code stop"));for(const m in C){const _=C[m].animationF(V.value);C[m].update(_)}});const U=(x=2e3,m)=>{let _;const st=[[-.9,.8,50],[1.9,.8,140],[-.9,.25,50],[1.9,.25,140]];requestAnimationFrame(at);function at(Z){_||(_=Z);for(const[nt,lt,ht]of st)ie({particleCount:9,spread:88,origin:{x:nt,y:lt},angle:ht,ticks:96,gravity:1.2,startVelocity:50});Z-_<x?requestAnimationFrame(at):m==null||m()}},Q=x=>{Y.cvsWidth=x;const{heart:m,element:_,draw:st}=ft.getHeartElement(Y);o.value.appendChild(_),F.value=m},K=({cvsWidth:x,cakeHeight:m})=>{H.cvsWidth=x,H.cvsHeight=m,H.cvs=a.value,y.value=new oe(H)},tt=()=>{i.value.width=600*devicePixelRatio,i.value.height=700*devicePixelRatio,M.value=he(i.value),M.value()},et=()=>{I.value.widht=innerWidth,I.value.height=innerHeight,I.value.pixelR=devicePixelRatio;const x=400*devicePixelRatio,m=700*devicePixelRatio;Q(x),K({cvsWidth:x,cakeHeight:m}),tt()};return Bt(()=>{et()}),(x,m)=>(Et(),Wt(te,null,[f("dialog",{class:Pt(["start-dog",{started:w.value}]),ref_key:"startDialog",ref:c,open:""},[f("div",{onClick:J},"准备，开始~")],2),f("div",we,[f("div",{ref_key:"mainWrap",ref:r,class:"main-wrap",onClick:m[1]||(m[1]=_=>console.log(Qt(V)))},[f("div",{class:"heart-wrap",style:j({opacity:`${B.value}`})},[f("div",{id:"heart-box",class:Pt({show:w.value}),ref_key:"heartWrap",ref:o},m[2]||(m[2]=[f("div",{class:"h-shadow"},null,-1)]),2),St(f("div",{style:j({scale:E.value,opacity:E.value})},m[3]||(m[3]=[f("div",{class:"text"},"给你比个小心心~",-1),f("div",{class:"info"},"可以点哦",-1)]),4),[[Ft,w.value]]),m[4]||(m[4]=f("div",{class:"heart-span empty-span",style:{height:"400px"}},null,-1))],4),f("div",ye,[f("div",xe,[f("canvas",{id:"word-rain",ref_key:"wordRain",ref:a},null,512),Kt(ge,{class:"yy-cake",onClick:m[0]||(m[0]=_=>U(500))}),m[5]||(m[5]=f("div",null,[f("div",{class:"ck-text"},"宝儿生日快乐呀"),f("div",{class:"ck-text"},"希望你一直开心~"),f("div",{class:"ck-text"},"嘎嘎吃饭，睡觉香香~")],-1)),St(f("div",{class:"cake-mask",style:j({"--lighting":`${W.value}%`,"--alpha":1-(100+W.value)/800})},null,4),[[Ft,W.value!==100]])]),m[6]||(m[6]=f("div",{class:"cake-span empty-span"},null,-1))]),f("div",Me,[f("div",Ce,[f("div",be,[f("div",ke,[m[7]||(m[7]=f("div",{class:"img"},[f("img",{src:ae,alt:""})],-1)),m[8]||(m[8]=f("div",{class:"letter"},[f("p",null,"小雨莹，生日快乐呀"),f("p",null,"嘿嘿，请你看一场电子烟花~"),f("p",null,"想跟你一起放好多烟花，拍好多好多合照哇...")],-1)),f("div",Pe,[f("canvas",{class:"f-cvs",ref_key:"firework",ref:i},null,512)])]),f("div",{class:"mask",style:j({opacity:.1+1-L.value})},[f("span",{style:j({"--curr":`${(1-L.value)*50}%`})},null,4),f("span",{style:j({"--curr":`${(1-L.value)*48}%`,"--curr2":`${(1-L.value)*50}%`}),class:"part1"},null,4),f("span",{style:j({"--curr":`${52+L.value*48}%`,"--curr2":`${50+L.value*50}%`}),class:"part2"},null,4)],4)])]),m[9]||(m[9]=f("div",{class:"empty-span"},null,-1))])],512)])],64))}},Be=At(Se,[["__scopeId","data-v-57f34bf3"]]);export{Be as default};
